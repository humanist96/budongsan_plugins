# 튜터리얼 2: 웹크롤링으로 부동산 매물 탐색

## 개요

- **목적:** Firecrawl MCP 서버를 활용하여 부동산 포털에서 실시간 매물 데이터를 수집하고 구조화된 분석을 수행합니다.
- **대상 독자:** 실시간 매물 탐색이 필요한 부동산 투자자, 데이터 기반 의사결정을 원하는 분석가
- **소요 시간:** 약 40-50분
- **난이도:** 중급
- **사용 플러그인:** firecrawl-mcp-server, mcp-fetch

### 이 튜터리얼에서 배우는 것

1. Firecrawl MCP 서버의 기본 사용법 (scrape, crawl, extract)
2. 부동산 포털에서 매물 정보를 체계적으로 수집하는 방법
3. 수집 데이터를 JSON으로 구조화하고 정제하는 기법
4. 호가 대비 실거래가 비교 분석
5. 급매물 자동 탐지 로직 구현
6. 매물 변동 모니터링 자동화

---

## 사전 준비

### 1. Firecrawl API 키 발급

Firecrawl은 웹페이지를 LLM 친화적인 마크다운으로 변환해주는 서비스입니다. 무료 티어에서 월 500 크레딧을 제공하므로 개인 분석 용도로 충분합니다.

**발급 절차:**

1. [firecrawl.dev](https://firecrawl.dev) 에 접속합니다.
2. 우측 상단 **Sign Up** 버튼을 클릭하고 GitHub 또는 이메일로 가입합니다.
3. 대시보드에 로그인한 뒤 **API Keys** 메뉴로 이동합니다.
4. **Create API Key** 버튼을 클릭하여 키를 생성합니다.
5. 생성된 키(fc-로 시작)를 안전한 곳에 복사하여 보관합니다.

> **주의:** API 키는 절대 공개 저장소에 커밋하지 마세요. 환경변수를 통해 관리합니다.

**크레딧 사용 안내:**

| 작업 유형 | 크레딧 소모 | 설명 |
|-----------|------------|------|
| scrape (단일 페이지) | 1 크레딧 | 단일 URL 스크래핑 |
| crawl (사이트 크롤링) | 페이지당 1 크레딧 | 여러 페이지 순회 크롤링 |
| extract (구조화 추출) | 5 크레딧 | AI 기반 구조화 데이터 추출 |

무료 티어 500 크레딧이면 단일 페이지 스크래핑 기준 약 500회 사용 가능합니다. 크레딧 잔여량은 Firecrawl 대시보드에서 확인할 수 있습니다.

### 2. MCP 서버 설치 및 설정

**환경변수 설정:**

터미널에서 Firecrawl API 키를 환경변수로 등록합니다.

```bash
# ~/.zshrc 또는 ~/.bashrc에 추가
export FIRECRAWL_API_KEY="fc-여기에_발급받은_키를_입력하세요"

# 변경사항 적용
source ~/.zshrc
```

**MCP 서버 설정:**

프로젝트 루트 또는 `~/.claude/` 디렉토리의 설정 파일에 다음을 추가합니다.

```json
{
  "mcpServers": {
    "firecrawl": {
      "command": "npx",
      "args": ["-y", "firecrawl-mcp"],
      "env": {
        "FIRECRAWL_API_KEY": "${FIRECRAWL_API_KEY}"
      }
    },
    "fetch": {
      "command": "uvx",
      "args": ["mcp-server-fetch"]
    }
  }
}
```

**설치 확인:**

Claude Code를 실행한 뒤 다음 프롬프트로 정상 동작을 확인합니다.

```
사용자: firecrawl 플러그인이 정상 작동하는지 확인해줘. https://example.com 을 스크래핑해봐.
```

정상적으로 설정되었다면 example.com의 HTML이 마크다운으로 변환된 결과가 출력됩니다.

---

## Step 1: Firecrawl 기본 사용법

Firecrawl MCP 서버는 크게 세 가지 핵심 기능을 제공합니다.

### 1-1. 웹페이지 단일 스크래핑 (scrape)

지정한 단일 URL의 콘텐츠를 마크다운으로 변환합니다.

```
사용자: https://land.naver.com 메인 페이지를 스크래핑해서 어떤 정보가 있는지 요약해줘.
```

**Claude의 처리 과정:**
1. `firecrawl_scrape` 도구를 호출하여 해당 URL의 콘텐츠를 수집합니다.
2. HTML을 마크다운으로 변환한 결과를 분석합니다.
3. 페이지에 포함된 주요 정보 구조를 요약합니다.

**예상 결과:**

```
네이버부동산 메인 페이지에는 다음과 같은 정보가 포함되어 있습니다:

- 아파트/오피스텔/빌라 등 매물 유형별 검색
- 인기 지역 매물 현황
- 최근 실거래가 정보
- 분양 정보
- 부동산 뉴스 및 시세 동향
```

### 1-2. 사이트 전체 크롤링 (crawl)

시작 URL로부터 링크를 따라가며 여러 페이지를 순회 수집합니다.

```
사용자: 네이버부동산의 강남구 아파트 매물 목록 페이지를 크롤링해줘.
      최대 10페이지까지만 수집하고, 매물 상세 페이지도 포함해줘.
```

**Claude의 처리 과정:**
1. `firecrawl_crawl` 도구를 호출합니다.
2. `maxDepth`와 `limit` 파라미터로 크롤링 범위를 제한합니다.
3. 수집된 여러 페이지의 콘텐츠를 종합 분석합니다.

> **크레딧 주의:** crawl은 방문한 페이지 수만큼 크레딧이 소모됩니다. limit 파라미터를 반드시 설정하여 과도한 크레딧 소모를 방지하세요.

### 1-3. 구조화된 데이터 추출 (extract)

AI를 활용하여 웹페이지에서 특정 스키마에 맞는 구조화된 데이터를 추출합니다.

```
사용자: 다음 URL에서 아파트 매물 정보를 구조화하여 추출해줘.
      필요한 필드: 단지명, 전용면적, 호가, 층수, 방향, 등록일
```

**Claude의 처리 과정:**
1. `firecrawl_extract` 도구를 호출합니다.
2. 원하는 데이터 스키마를 정의하여 전달합니다.
3. AI가 페이지 내용에서 해당 필드를 자동 추출합니다.

---

## Step 2: 부동산 포털 매물 정보 수집

실제 부동산 매물 데이터를 수집하는 과정을 단계별로 실습합니다.

### 2-1. 매물 목록 수집

```
사용자: 네이버부동산에서 강남구 대치동 아파트 매물 정보를 크롤링해줘.
      매매와 전세 매물 모두 포함하고, 단지별로 정리해줘.
```

**Claude의 처리 흐름:**

```
1. firecrawl_scrape로 대치동 아파트 매물 목록 페이지 수집
2. 페이지 내 매물 정보를 파싱
3. 추가 상세 페이지가 있으면 개별 스크래핑
4. 수집 결과를 단지별로 그룹화하여 정리
```

### 2-2. 수집 가능한 데이터 필드

부동산 포털에서 일반적으로 수집 가능한 매물 정보 필드입니다.

| 카테고리 | 필드 | 설명 | 예시 |
|---------|------|------|------|
| 기본 정보 | 단지명 | 아파트 단지 이름 | 은마아파트 |
| 기본 정보 | 동/호수 | 동 번호 (호수는 비공개 경우 많음) | 101동 |
| 면적 정보 | 전용면적 | 실사용 면적 (㎡) | 76.79㎡ |
| 면적 정보 | 공급면적 | 공급 면적 (㎡) | 108.20㎡ |
| 가격 정보 | 매매 호가 | 매도 희망 가격 | 28억 5,000만 원 |
| 가격 정보 | 전세 호가 | 전세 희망 가격 | 12억 원 |
| 위치 정보 | 층수 | 해당 매물의 층수 | 15층 |
| 위치 정보 | 방향 | 주 채광 방향 | 남향 |
| 부가 정보 | 방/욕실 수 | 방과 욕실 개수 | 3방 2욕실 |
| 부가 정보 | 입주가능일 | 입주 가능 시점 | 협의 |
| 부가 정보 | 매물등록일 | 중개사가 등록한 날짜 | 2026-02-15 |
| 중개사 | 중개사무소 | 등록 중개사무소명 | OO공인중개사 |

### 2-3. 예상 수집 결과

```
사용자: 크롤링 결과를 테이블로 정리해줘.
```

**예상 결과:**

```markdown
## 대치동 아파트 매매 매물 현황 (2026.02.18 기준)

### 은마아파트 (1979년 준공, 4,424세대)

| 전용면적 | 호가 | 층수 | 방향 | 방/욕실 | 등록일 |
|---------|------|------|------|---------|--------|
| 76㎡ (31평) | 28억 5,000 | 15층 | 남향 | 3/1 | 02.15 |
| 76㎡ (31평) | 29억 | 8층 | 남동향 | 3/1 | 02.12 |
| 84㎡ (34평) | 31억 2,000 | 20층 | 남향 | 3/1 | 02.10 |
| 84㎡ (34평) | 30억 8,000 | 5층 | 동향 | 3/1 | 02.16 |
| 101㎡ (42평) | 35억 | 12층 | 남향 | 4/2 | 02.14 |

### 대치아이파크 (2008년 준공, 407세대)

| 전용면적 | 호가 | 층수 | 방향 | 방/욕실 | 등록일 |
|---------|------|------|------|---------|--------|
| 120㎡ (49평) | 42억 | 18층 | 남향 | 4/2 | 02.13 |
| 120㎡ (49평) | 43억 5,000 | 25층 | 남향 | 4/2 | 02.11 |
| 163㎡ (66평) | 58억 | 22층 | 남동향 | 5/3 | 02.09 |

### 래미안대치팰리스 (2015년 준공, 1,608세대)

| 전용면적 | 호가 | 층수 | 방향 | 방/욕실 | 등록일 |
|---------|------|------|------|---------|--------|
| 84㎡ (34평) | 38억 | 10층 | 남향 | 3/2 | 02.17 |
| 84㎡ (34평) | 39억 2,000 | 22층 | 남향 | 3/2 | 02.14 |
| 114㎡ (46평) | 52억 | 15층 | 남동향 | 4/2 | 02.12 |
| 114㎡ (46평) | 51억 5,000 | 8층 | 남향 | 4/2 | 02.16 |

총 수집 매물 수: 12건 (3개 단지)
```

### 2-4. 크롤링 시 주의사항

**robots.txt 확인:**

크롤링 전에 반드시 대상 사이트의 robots.txt를 확인해야 합니다.

```
사용자: land.naver.com의 robots.txt를 확인해줘. 크롤링이 허용되는 경로인지 점검해줘.
```

**주의해야 할 사항:**

1. **robots.txt 준수:** 사이트가 크롤링을 명시적으로 금지한 경로는 접근하지 않습니다.
2. **요청 간격 조절:** 짧은 시간에 과도한 요청을 보내면 서버에 부하를 주고 IP가 차단될 수 있습니다. Firecrawl은 기본적으로 적절한 간격을 유지합니다.
3. **이용약관 확인:** 각 부동산 포털의 이용약관에서 자동화된 데이터 수집에 대한 조항을 확인하세요.
4. **개인정보 보호:** 중개사 개인 연락처 등 개인정보는 수집하거나 저장하지 않습니다.

---

## Step 3: 매물 데이터 구조화

수집한 매물 데이터를 프로그래밍적으로 활용 가능한 JSON 형식으로 변환합니다.

### 3-1. JSON 구조화 요청

```
사용자: 수집한 대치동 매물 데이터를 JSON 형식으로 구조화해줘.
      각 매물에 고유 ID를 부여하고, 가격은 만원 단위 숫자로 변환해줘.
      평형 정보도 ㎡와 평 양쪽 모두 포함해줘.
```

### 3-2. 구조화된 JSON 스키마

```json
{
  "crawlDate": "2026-02-18T14:30:00+09:00",
  "region": {
    "city": "서울특별시",
    "district": "강남구",
    "dong": "대치동"
  },
  "totalListings": 12,
  "complexes": [
    {
      "complexName": "은마아파트",
      "complexId": "daichi-eunma",
      "builtYear": 1979,
      "totalUnits": 4424,
      "address": "서울특별시 강남구 대치동 은마아파트",
      "listings": [
        {
          "listingId": "daichi-eunma-001",
          "tradeType": "매매",
          "exclusiveArea": {
            "sqm": 76.79,
            "pyeong": 23.2
          },
          "supplyArea": {
            "sqm": 108.20,
            "pyeong": 32.7
          },
          "price": {
            "asking": 285000,
            "unit": "만원",
            "formatted": "28억 5,000만 원"
          },
          "floor": 15,
          "direction": "남향",
          "rooms": 3,
          "bathrooms": 1,
          "availableDate": "협의",
          "registeredDate": "2026-02-15",
          "description": "올수리 완료, 학군 우수"
        },
        {
          "listingId": "daichi-eunma-002",
          "tradeType": "매매",
          "exclusiveArea": {
            "sqm": 76.79,
            "pyeong": 23.2
          },
          "supplyArea": {
            "sqm": 108.20,
            "pyeong": 32.7
          },
          "price": {
            "asking": 290000,
            "unit": "만원",
            "formatted": "29억"
          },
          "floor": 8,
          "direction": "남동향",
          "rooms": 3,
          "bathrooms": 1,
          "availableDate": "즉시입주",
          "registeredDate": "2026-02-12",
          "description": "리모델링 완료"
        }
      ]
    }
  ]
}
```

### 3-3. 데이터 정제 처리

Claude에게 데이터 정제 작업을 구체적으로 요청할 수 있습니다.

```
사용자: 수집한 매물 데이터를 다음 기준으로 정제해줘:
      1. 가격 표기 통일: "28.5억", "28억5천", "285,000만원" → 모두 만원 단위 정수로
      2. 면적 변환: ㎡ → 평 환산 추가 (1평 = 3.3058㎡)
      3. 중복 매물 제거: 같은 단지, 같은 면적, 같은 층수의 매물 중복 제거
      4. 방향 표기 통일: "남", "S", "남쪽" → "남향"
```

**Claude의 데이터 정제 처리 예시:**

```
데이터 정제 결과를 보고합니다.

1. 가격 파싱 결과:
   - "28.5억" → 285,000 (만원)
   - "28억5천" → 285,000 (만원)
   - "3억 2,000" → 32,000 (만원)

2. 면적 변환 결과:
   - 76.79㎡ → 23.2평
   - 84.97㎡ → 25.7평
   - 114.74㎡ → 34.7평

3. 중복 제거: 2건 중복 발견 → 제거 완료 (12건 → 10건)

4. 방향 통일: "남" 2건, "남쪽" 1건 → "남향"으로 통일
```

---

## Step 4: 호가 vs 실거래가 비교 분석

크롤링한 현재 호가(매도 희망가)와 실거래가를 비교하여 시장 상황을 분석합니다.

### 4-1. 비교 분석 요청

```
사용자: 대치동 은마아파트 76㎡ 매물의 호가와 최근 실거래가를 비교 분석해줘.
      국토교통부 실거래가 공개시스템 데이터도 참고해줘.
      호가 대비 실거래가 할인율을 계산하고, 현재 시장 상황을 해석해줘.
```

### 4-2. Claude의 비교 분석 과정

```
다음과 같이 분석을 진행하겠습니다.

1단계: 현재 호가 데이터 (크롤링 결과 활용)
2단계: 실거래가 데이터 수집 (공공 API 또는 포털 크롤링)
3단계: 호가 대비 실거래가 비교 테이블 작성
4단계: 시장 상황 해석
```

### 4-3. 비교 분석 결과 예시

```markdown
## 은마아파트 76㎡ 호가 vs 실거래가 비교 분석

### 최근 실거래 내역 (2025.12 - 2026.02)

| 거래일 | 층수 | 실거래가 | 비고 |
|--------|------|---------|------|
| 2026.01.25 | 12층 | 27억 8,000 | |
| 2026.01.10 | 7층 | 27억 2,000 | |
| 2025.12.20 | 18층 | 28억 1,000 | |
| 2025.12.05 | 3층 | 26억 5,000 | 저층 |

### 호가 vs 실거래가 비교

| 매물 | 층수 | 현재 호가 | 최근 실거래 평균 | 호가 프리미엄 |
|------|------|----------|----------------|-------------|
| 매물 1 | 15층 | 28억 5,000 | 27억 4,000 | +4.0% |
| 매물 2 | 8층 | 29억 | 27억 4,000 | +5.8% |

### 시장 분석

- **최근 3개월 실거래 평균:** 27억 4,000만 원
- **현재 호가 평균:** 28억 7,500만 원
- **호가 프리미엄:** +4.9%

### 해석

현재 호가가 실거래가 대비 약 5% 높게 형성되어 있습니다.
이는 일반적인 매도자 희망가 반영 수준으로, 과도한 괴리는 아닙니다.

- 호가 프리미엄 0~3%: 실거래 활발, 매도자 우위 시장
- 호가 프리미엄 3~7%: 보합세, 매수-매도 균형 시장
- 호가 프리미엄 7% 이상: 매물 적체, 매수자 우위 시장

현재 대치동 은마아파트 76㎡는 **매수-매도 균형 시장**으로 판단되며,
실거래가 대비 4~5% 할인 협상 여지가 있습니다.
```

### 4-4. 시계열 추이 분석

```
사용자: 은마아파트 76㎡의 최근 6개월 실거래가 추이와 호가 변동 추이를 함께 분석해줘.
      가격 방향성이 상승인지 하락인지 판단해줘.
```

**예상 결과:**

```markdown
### 은마아파트 76㎡ 가격 추이 (2025.09 ~ 2026.02)

| 시기 | 실거래 평균 | 호가 평균 | 호가 프리미엄 |
|------|-----------|----------|-------------|
| 2025.09 | 25억 8,000 | 27억 | +4.7% |
| 2025.10 | 26억 2,000 | 27억 5,000 | +5.0% |
| 2025.11 | 26억 8,000 | 28억 | +4.5% |
| 2025.12 | 27억 3,000 | 28억 3,000 | +3.7% |
| 2026.01 | 27억 5,000 | 28억 5,000 | +3.6% |
| 2026.02 | - | 28억 7,500 | - |

- 6개월간 실거래가 상승폭: +1억 7,000만 원 (+6.6%)
- 월평균 상승률: +1.1%
- 추세: 완만한 상승세 지속
- 호가 프리미엄 축소 추세 → 매도자의 가격 현실화 진행 중
```

---

## Step 5: 급매물 탐지

시세 대비 저평가된 급매물을 자동으로 탐지하는 방법입니다.

### 5-1. 급매물 탐지 요청

```
사용자: 현재 대치동 아파트 매물 중 시세 대비 저평가된 급매물을 찾아줘.
      급매 판별 기준은 다음과 같아:
      - 최근 3개월 실거래 평균 대비 5% 이상 낮은 호가
      - 또는 같은 단지, 같은 면적 매물 중 최저 호가
      결과를 급매 확률과 함께 정리해줘.
```

### 5-2. 급매 판별 로직

Claude가 적용하는 급매 판별 기준은 다음과 같습니다.

**1차 필터 - 가격 기준:**

```
급매 점수 계산:
- 실거래 평균 대비 호가 비율 = (호가 - 실거래평균) / 실거래평균 * 100

분류:
- 호가 비율 -5% 이하: 급매 (높은 확률)
- 호가 비율 -3% ~ -5%: 준급매 (중간 확률)
- 호가 비율 -3% ~ 0%: 적정가 (시세 수준)
- 호가 비율 0% 이상: 일반 매물 (호가에 여유)
```

**2차 필터 - 부가 조건:**

```
급매 가능성을 높이는 부가 지표:
- 매물 등록 후 30일 이상 경과
- 가격 하향 조정 이력 있음
- "급매", "급전", "이사" 등 키워드 포함
- 같은 단지 동일 면적 최저가
```

### 5-3. 급매물 탐지 결과 예시

```markdown
## 대치동 급매물 탐지 결과

### 급매 확률 높음 (시세 대비 -5% 이하)

| 단지명 | 전용면적 | 호가 | 실거래 평균 | 괴리율 | 층수 | 비고 |
|--------|---------|------|-----------|--------|------|------|
| 은마아파트 | 84㎡ | 30억 8,000 | 32억 5,000 | -5.2% | 5층 | 저층, 등록 45일 경과 |

### 준급매 (시세 대비 -3% ~ -5%)

| 단지명 | 전용면적 | 호가 | 실거래 평균 | 괴리율 | 층수 | 비고 |
|--------|---------|------|-----------|--------|------|------|
| 래미안대치팰리스 | 114㎡ | 51억 5,000 | 53억 5,000 | -3.7% | 8층 | 가격 1회 하향 조정 |

### 분석 의견

1. **은마아파트 84㎡ 5층 (30억 8,000):** 저층이라는 단점이 있지만 실거래 평균 대비
   5.2% 저렴합니다. 등록 후 45일이 경과하여 매도자의 급매 의지가 높을 것으로 추정됩니다.
   매수 협상 시 30억 ~ 30억 5,000 수준 타진 가능합니다.

2. **래미안대치팰리스 114㎡ 8층 (51억 5,000):** 처음 52억 5,000에 등록 후 1억 하향
   조정한 이력이 있습니다. 추가 협상 여지가 있어 보입니다.
```

### 5-4. 급매물 비교 평가

```
사용자: 탐지된 급매물 2건에 대해 투자 매력도를 비교 평가해줘.
      향후 가격 상승 가능성, 전세가율, 학군, 교통 접근성을 종합적으로 고려해줘.
```

---

## Step 6: 매물 모니터링 자동화

mcp-fetch를 활용하여 정기적으로 매물 데이터를 수집하고 변동사항을 감지하는 시나리오입니다.

### 6-1. 정기 수집 시나리오

```
사용자: 매일 아침 9시에 대치동 아파트 매물 현황을 확인할 수 있도록
      크롤링 프롬프트를 작성해줘. 어제 대비 변동사항을 중심으로 보고해줘.
```

**Claude가 생성하는 모니터링 프롬프트 템플릿:**

```
다음을 수행해줘:

1. 네이버부동산에서 강남구 대치동 아파트 매매 매물을 크롤링해줘.
2. 이전 수집 데이터(data/listings_20260217.json)와 비교하여 다음을 보고해줘:
   - 새로 등록된 매물
   - 삭제(거래완료 추정)된 매물
   - 가격이 변동된 매물 (호가 상향/하향)
3. 결과를 data/listings_20260218.json으로 저장해줘.
4. 변동 요약 리포트를 작성해줘.
```

### 6-2. 변동 감지 보고 예시

```markdown
## 대치동 아파트 매물 변동 보고서 (2026.02.18)

### 신규 등록 매물 (+3건)

| 단지명 | 전용면적 | 호가 | 층수 | 등록일 |
|--------|---------|------|------|--------|
| 은마아파트 | 76㎡ | 28억 8,000 | 11층 | 02.18 |
| 대치SK뷰 | 84㎡ | 33억 | 16층 | 02.18 |
| 래미안대치팰리스 | 84㎡ | 37억 5,000 | 5층 | 02.18 |

### 삭제(거래완료 추정) 매물 (-2건)

| 단지명 | 전용면적 | 최종 호가 | 층수 | 비고 |
|--------|---------|----------|------|------|
| 은마아파트 | 101㎡ | 35억 | 12층 | 등록 후 32일 만에 삭제 |
| 대치아이파크 | 120㎡ | 42억 | 18층 | 등록 후 5일 만에 삭제 |

### 가격 변동 매물 (2건)

| 단지명 | 전용면적 | 이전 호가 | 변경 호가 | 변동폭 |
|--------|---------|----------|----------|--------|
| 은마아파트 | 84㎡ | 31억 2,000 | 30억 8,000 | -4,000만 (↓) |
| 래미안대치팰리스 | 114㎡ | 52억 | 51억 5,000 | -5,000만 (↓) |

### 요약
- 전일 대비 매물 수: 12건 → 13건 (+1건)
- 신규 등록: 3건 / 삭제(거래완료 추정): 2건
- 가격 하향 조정: 2건 / 가격 상향 조정: 0건
- 시장 동향: 매도자 측에서 소폭 가격 하향 조정 움직임 관측
```

### 6-3. mcp-fetch 활용

mcp-fetch는 Firecrawl보다 간단한 HTTP 요청에 적합합니다. 공공 API 호출이나 단순 페이지 확인에 활용합니다.

```
사용자: mcp-fetch로 국토교통부 실거래가 공개시스템 API를 호출해서
      대치동 최근 아파트 실거래가를 조회해줘.
```

**mcp-fetch와 firecrawl의 사용 구분:**

| 상황 | 권장 도구 | 이유 |
|------|----------|------|
| HTML 페이지 스크래핑 | firecrawl | 마크다운 변환, JavaScript 렌더링 지원 |
| REST API 호출 | mcp-fetch | 단순 HTTP 요청, 크레딧 소모 없음 |
| 여러 페이지 순회 크롤링 | firecrawl | 자동 링크 추적, depth 관리 |
| JSON API 응답 처리 | mcp-fetch | 직접 JSON 파싱 가능 |
| 로그인이 필요한 페이지 | firecrawl | 인증 처리 지원 |

---

## 실전 응용

### 응용 1: 다중 포털 비교

여러 부동산 포털의 매물을 교차 검증하여 데이터의 정확도를 높입니다.

```
사용자: 네이버부동산과 직방에서 대치동 은마아파트 76㎡ 매매 매물을 각각 크롤링해서
      비교 분석해줘. 같은 매물이 다른 가격으로 등록된 경우가 있는지 확인해줘.
```

**예상 결과:**

```markdown
## 다중 포털 매물 비교: 은마아파트 76㎡

### 포털별 매물 수

| 포털 | 매물 수 | 호가 범위 | 평균 호가 |
|------|--------|----------|----------|
| 네이버부동산 | 5건 | 28.5억 ~ 29.5억 | 29.0억 |
| 직방 | 4건 | 28.3억 ~ 29.2억 | 28.8억 |

### 동일 매물 추정 (같은 층수 + 유사 가격)

| 층수 | 네이버 호가 | 직방 호가 | 가격 차이 | 동일 매물 여부 |
|------|-----------|---------|----------|-------------|
| 15층 | 28억 5,000 | 28억 3,000 | -2,000만 | 동일 추정 (O) |
| 8층 | 29억 | 29억 2,000 | +2,000만 | 동일 추정 (O) |

### 분석
- 15층 매물은 직방에서 2,000만 원 더 저렴하게 등록됨
- 8층 매물은 네이버에서 2,000만 원 더 저렴하게 등록됨
- 중개사무소에 따라 포털별 호가 차이가 발생할 수 있음
- 실제 매수 시에는 양쪽 포털의 가격을 모두 확인하는 것이 유리
```

### 응용 2: 전세 매물 탐색

갭투자 분석을 위해 전세가율이 높은 매물을 우선 탐색합니다.

```
사용자: 대치동 아파트 전세 매물을 크롤링하고, 매매가 대비 전세가율을 계산해줘.
      전세가율 70% 이상인 매물을 우선 표시하고, 갭투자 관점에서 분석해줘.
```

**예상 결과:**

```markdown
## 대치동 아파트 전세가율 분석

| 단지명 | 전용면적 | 매매 호가 | 전세 호가 | 전세가율 | 갭(매매-전세) |
|--------|---------|----------|----------|---------|-------------|
| 은마아파트 | 76㎡ | 28.5억 | 12.0억 | 42.1% | 16.5억 |
| 은마아파트 | 84㎡ | 30.8억 | 14.5억 | 47.1% | 16.3억 |
| 래미안대치팰리스 | 84㎡ | 38.0억 | 18.0억 | 47.4% | 20.0억 |

### 분석
- 대치동 주요 단지의 전세가율은 42~47% 수준으로, 강남권 평균과 유사합니다.
- 전세가율 70% 이상인 매물은 현재 발견되지 않았습니다.
- 갭(매매-전세) 금액이 16~20억 수준으로 상당히 큰 편이며, 대출 규제를 감안하면
  상당한 자기자본이 필요합니다.
- 갭투자보다는 실거주 목적 매수가 적합한 지역으로 판단됩니다.
```

### 응용 3: 신규 매물 알림

새로 등록된 매물을 자동으로 감지하여 빠르게 대응하는 시나리오입니다.

```
사용자: 대치동 은마아파트에 새로운 매물이 등록되면 알려줘.
      특히 76㎡ 기준 28억 이하의 매물이 나오면 긴급 알림으로 표시해줘.
```

**프롬프트 템플릿:**

```
다음 조건으로 신규 매물을 확인해줘:

1. 대상: 강남구 대치동 은마아파트
2. 관심 면적: 전용 76㎡
3. 긴급 알림 조건: 호가 28억 이하
4. 일반 알림 조건: 호가 29억 이하
5. 이전 데이터: data/eunma_listings_latest.json

현재 매물 목록을 크롤링한 뒤, 이전 데이터에 없던 신규 매물을 식별하고,
위 조건에 해당하는 매물이 있으면 알림 형식으로 보고해줘.
```

**예상 알림 결과:**

```markdown
## 신규 매물 알림 (2026.02.18 14:30)

### [긴급] 관심 조건 매물 발견

은마아파트 76㎡ | 27억 8,000 | 10층 | 남향
- 실거래 평균 대비 -1.5% (적정 수준)
- 등록일: 오늘 (02.18)
- 비고: 올수리, 즉시입주 가능

→ 관심 매물로 등록하시겠습니까?
```

---

## 주의사항

### 법적 및 윤리적 준수사항

1. **robots.txt 및 이용약관 준수 필수:**
   각 부동산 포털의 robots.txt 파일을 반드시 확인하고, 크롤링이 허용된 범위 내에서만 데이터를 수집하세요. 이용약관에서 자동화된 접근을 금지하는 경우 해당 방법을 사용하지 마세요.

2. **과도한 크롤링 금지:**
   짧은 시간 내에 대량의 요청을 보내면 대상 서버에 부하를 주며, IP 차단 조치를 받을 수 있습니다. Firecrawl은 기본적으로 적절한 요청 간격을 유지하지만, 수동으로 반복 크롤링할 때는 주의하세요.

3. **개인정보 보호:**
   중개사의 개인 연락처, 이메일 등 개인정보는 수집하거나 별도 저장하지 마세요. 매물 정보 자체만 분석 대상으로 활용합니다.

4. **수집 데이터 활용 범위:**
   크롤링으로 수집한 데이터는 개인 분석 및 투자 판단 용도로만 사용하세요. 상업적 목적으로 재판매하거나 대량 배포하지 마세요.

### Firecrawl 크레딧 관리

| 작업 | 크레딧 | 권장 빈도 |
|------|--------|----------|
| 관심 단지 매물 목록 스크래핑 | 1~3 크레딧 | 일 1~2회 |
| 단지별 상세 페이지 크롤링 | 5~10 크레딧 | 주 2~3회 |
| 구조화 데이터 추출 | 5 크레딧 | 필요시 |
| 월간 예상 사용량 (적극적 모니터링) | 150~250 크레딧 | - |
| 무료 티어 월 한도 | 500 크레딧 | - |

**크레딧 절약 팁:**
- 전체 사이트 crawl보다 특정 URL scrape를 우선 사용하세요.
- 같은 페이지를 반복 수집할 때는 캐시 데이터를 먼저 확인하세요.
- extract는 크레딧이 5배 소모되므로, 단순 스크래핑 후 Claude가 직접 파싱하는 것이 더 경제적입니다.

### 데이터 정확성 주의

- 크롤링 시점에 따라 매물 정보가 달라질 수 있습니다.
- 이미 거래가 완료되었으나 삭제되지 않은 매물이 포함될 수 있습니다.
- 호가는 실제 거래 가능 가격과 다를 수 있으므로 반드시 실거래가와 비교하세요.
- 중요한 투자 결정은 크롤링 데이터만으로 내리지 말고, 현장 확인과 전문가 상담을 병행하세요.

---

## 다음 단계

이 튜터리얼에서 수집하고 구조화한 매물 데이터를 활용하여 더 심화된 분석을 수행할 수 있습니다.

- [튜터리얼 3: 투자수익률 계산 및 시뮬레이션](./튜터리얼3_투자수익률_계산_및_시뮬레이션.md) - 수집한 매물의 예상 수익률을 계산하고 다양한 시나리오를 시뮬레이션합니다.
- [튜터리얼 6: 지역비교 분석 리포트 자동생성](./튜터리얼6_지역비교_분석_리포트_자동생성.md) - 여러 지역의 크롤링 데이터를 종합하여 비교 분석 리포트를 자동 생성합니다.
